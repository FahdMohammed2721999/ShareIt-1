<!DOCTYPE html>
<html>
    <head>
        <script src="http://code.jquery.com/jquery-latest.js"></script>
    </head>
    <body>
        <a id="tools-menu">
            <img src="images/configure.png"/>
        </a>
        <div id="tools-menu-submenu" style="background:#de9a44; width:24px; height:48px; display:none;">
            <a onclick='$("#dialog-config").dialog("open")' style="cursor: pointer;">
                <img src="images/gtk-preferences.png"/>
            </a>
        </div>
        <script>
            $("#tools-menu").click(function()
            {
                var submenu = $("#tools-menu-submenu")

                if(submenu.is(":hidden"))
                {
                    var submenu_active = false;

                    function timeout(ms)
                    {
                        setTimeout(function()
                        {
                            if(submenu_active === false)
                                submenu.slideUp();
                        }, ms);
                    }

                    submenu.mouseenter(function()
                    {
                        submenu_active = true;
                    });
                    submenu.mouseleave(function()
                    {
                        submenu_active = false;
                        timeout(400)
                    });

                    submenu.slideDown();
                    timeout(1000)
                }
                else
                    submenu.slideUp();
            });
        </script>
    </body>
</html>